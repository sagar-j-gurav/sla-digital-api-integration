# SLA Digital API Integration Environment Variables
# Copy this file to .env and fill in your actual values

# ============================================
# ENVIRONMENT CONFIGURATION
# ============================================
NODE_ENV=development
PORT=3000
LOG_LEVEL=info
LOG_FILE_PATH=logs/sla-digital.log

# ============================================
# POSTGRESQL DATABASE CONFIGURATION (REQUIRED)
# ============================================
# Option 1: Full connection URL
DATABASE_URL=postgresql://postgres:password@localhost:5432/sla_digital

# Option 2: Individual PostgreSQL variables
PGHOST=localhost
PGPORT=5432
PGUSER=postgres
PGPASSWORD=password
PGDATABASE=sla_digital

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=60000

# ============================================
# OPERATOR API CREDENTIALS
# ============================================
# Alacrity API Credentials for Zain Bahrain
OPERATOR_ALACRITY_USERNAME=your_alacrity_username
OPERATOR_ALACRITY_PASSWORD=your_alacrity_password

# SLA Digital API Credentials by Environment
# SANDBOX ENVIRONMENT
SANDBOX_API_USERNAME=your_sandbox_username_here
SANDBOX_API_PASSWORD=your_sandbox_password_here

# PRODUCTION ENVIRONMENT
PRODUCTION_API_USERNAME=your_production_username_here
PRODUCTION_API_PASSWORD=your_production_password_here

# PRE-PRODUCTION ENVIRONMENT (Optional)
PREPRODUCTION_API_USERNAME=your_preproduction_username_here
PREPRODUCTION_API_PASSWORD=your_preproduction_password_here

# ============================================
# MERCHANT CONFIGURATION
# ============================================
# Your merchant ID from SLA Digital
MERCHANT_ID=partner:00000000-0000-0000-0000-000000000000

# Default campaign ID for testing
DEFAULT_CAMPAIGN_ID=campaign:00000000-0000-0000-0000-000000000000

# ============================================
# ZAIN BAHRAIN SPECIFIC CONFIGURATION
# ============================================
OPERATOR_ZAIN_BH_SERVICE_ID=campaign:xxxxx-xxxxx-xxxxx-xxxxx
ZAIN_BH_SERVICE_ID=campaign:xxxxx-xxxxx-xxxxx-xxxxx
ZAIN_BH_SHORTCODE=94005
ZAIN_BH_KEYWORD=SUB
ZAIN_BH_PIN_LENGTH=5
ZAIN_BH_PIN_VALIDITY_SECONDS=120

# ============================================
# CHECKOUT CONFIGURATION
# ============================================
# Redirect URL for checkout (required for Zain operators)
CHECKOUT_REDIRECT_URL=https://yoursite.com/success
# For testing, you can use:
# CHECKOUT_REDIRECT_URL=https://example.com/success

# ============================================
# WEBHOOK CONFIGURATION
# ============================================
# Webhook endpoint secret for signature validation (min 32 chars)
WEBHOOK_SECRET=your_webhook_secret_here_minimum_32_characters

# Webhook retry configuration
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_MS=5000
WEBHOOK_TIMEOUT_MS=30000

# ============================================
# SERVER CONFIGURATION
# ============================================
# Whitelisted IPs (comma-separated, CIDR notation supported)
WHITELISTED_IPS=127.0.0.1/32,::1,192.168.0.0/16,10.0.0.0/8

# API rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Request size limits
MAX_REQUEST_SIZE=10mb
MAX_JSON_SIZE=1mb

# ============================================
# SECURITY CONFIGURATION
# ============================================
# JWT secret for internal auth (min 32 chars)
JWT_SECRET=your_jwt_secret_here_minimum_32_characters

# Encryption key for sensitive data (32 bytes hex)
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# Session configuration
SESSION_SECRET=your_session_secret_here_minimum_32_characters
SESSION_MAX_AGE_MS=86400000

# API Key for internal services
INTERNAL_API_KEY=your_internal_api_key_minimum_32_characters

# ============================================
# MONITORING & ALERTING (OPTIONAL)
# ============================================
# Health check configuration
HEALTH_CHECK_INTERVAL_MS=30000
HEALTH_CHECK_TIMEOUT_MS=5000

# Metrics configuration
ENABLE_METRICS=true
METRICS_PORT=9090

# Error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ============================================
# TESTING CONFIGURATION
# ============================================
# Test mode flags
TEST_MODE=false
SKIP_IP_WHITELIST=false
MOCK_WEBHOOK_RESPONSES=false

# Test MSISDNs for sandbox
TEST_MSISDN_ZAIN_BH=97312345678
TEST_MSISDN_VODAFONE_UK=447700900000
TEST_MSISDN_TELENOR_MM=959123456789

# Sandbox test PIN (always 000000 in sandbox)
SANDBOX_TEST_PIN=000000

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_WEBHOOK_PROCESSING=true
ENABLE_ACR_STORAGE=true
ENABLE_TRANSACTION_LOGS=true
ENABLE_AUDIT_TRAIL=true
ENABLE_DEBUG_LOGGING=false
ENABLE_REQUEST_LOGGING=true
ENABLE_RESPONSE_CACHING=false

# ============================================
# NOTES
# ============================================
# 1. NEVER commit this file with real values to version control
# 2. PostgreSQL is REQUIRED - do not use MongoDB
# 3. Use strong, unique passwords for each environment
# 4. For Zain Bahrain testing, update OPERATOR_ZAIN_BH_SERVICE_ID with actual service ID
# 5. Ensure all production URLs use HTTPS
# 6. IP whitelisting is mandatory for production
# 7. Set CHECKOUT_REDIRECT_URL to your success page URL